jQuery(document).ready(function(e){function t(){var t=Math.ceil(2*s/a),r=d>l?1.1/Math.sin(Math.PI/2-d*Math.PI/180):1.1/Math.sin(Math.PI/2-l*Math.PI/180),o=Math.ceil(2*s*r),n=Math.ceil(o/a),i=s-o/2,m=(t-n)/2;e(".cd-background-wrapper").css({height:t}),e(".cd-floating-background").addClass("is-absolute").css({left:i,top:m,width:o})}function r(t){var r=(-t.pageX+s)/s*d,a=(t.pageY-n)/n*l;r>d&&(r=d),r<-d&&(r=-d),a>l&&(a=l),a<-l&&(a=-l),e(".cd-floating-background").css({"-moz-transform":"rotateX("+a+"deg) rotateY("+r+"deg) translateZ(0)","-webkit-transform":"rotateX("+a+"deg) rotateY("+r+"deg) translateZ(0)","-ms-transform":"rotateX("+a+"deg) rotateY("+r+"deg) translateZ(0)","-o-transform":"rotateX("+a+"deg) rotateY("+r+"deg) translateZ(0)",transform:"rotateX("+a+"deg) rotateY("+r+"deg) translateZ(0)"})}var a,o=window.getComputedStyle(document.querySelector(".cd-background-wrapper"),"::before").getPropertyValue("content").replace(/"/g,"").replace(/'/g,""),n=.5*e(window).height(),s=.5*e(window).width(),d=5,l=3;e(".cd-floating-background").find("img, span").eq(0).load(function(){a=e(this).width()/e(this).height(),"web"==o&&e("html").hasClass("preserve-3d")&&t()}).each(function(){this.complete&&e(this).load()}),e(".cd-background-wrapper").on("mousemove",function(t){"web"==o&&e("html").hasClass("preserve-3d")&&window.requestAnimationFrame(function(){r(t)})}),e(window).on("resize",function(){"web"==(o=window.getComputedStyle(document.querySelector(".cd-background-wrapper"),"::before").getPropertyValue("content").replace(/"/g,"").replace(/'/g,""))&&e("html").hasClass("preserve-3d")?window.requestAnimationFrame(function(){n=.5*e(window).height(),s=.5*e(window).width(),t()}):(e(".cd-background-wrapper").attr("style",""),e(".cd-floating-background").attr("style","").removeClass("is-absolute"))})}),function(){var e=document.createElement("p"),t=document.getElementsByTagName("html")[0],r={webkitTransformStyle:"-webkit-transform-style",MozTransformStyle:"-moz-transform-style",msTransformStyle:"-ms-transform-style",transformStyle:"transform-style"};document.getElementsByTagName("body")[0].insertBefore(e,null);for(var a in r)void 0!==e.style[a]&&(e.style[a]="preserve-3d");var o=window.getComputedStyle(e,null),n=o.getPropertyValue("-webkit-transform-style")||o.getPropertyValue("-moz-transform-style")||o.getPropertyValue("-ms-transform-style")||o.getPropertyValue("transform-style");t.className+="preserve-3d"!==n?" no-preserve-3d":" preserve-3d",document.body.removeChild(e)}();